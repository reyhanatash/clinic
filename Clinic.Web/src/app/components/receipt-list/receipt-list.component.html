<div class="appContainer">
  <div class="col-12">
    <div class="col-12 d-flex justify-content-start my-3">
      <button *ngIf="!isPayment && checkAccess(2)" class="btn main-btn" routerLink="/receipt">دریافتی جدید</button>
      <button *ngIf="isPayment && checkAccess(2)" class="btn main-btn" routerLink="/payment">پرداخت جدید</button>
    </div>
    <p-table *ngIf="checkAccess(1)" id="dataTable" #dt styleClass="" class="data-table" [value]="tableData"
      [pageLinks]="20" [autoLayout]="true" [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
      currentPageReportTemplate="نمایش {first} تا {last} " [rowsPerPageOptions]="[10,25,50]">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="receiptNo">شماره
            <p-sortIcon field="receiptNo"></p-sortIcon>
          </th>
          <th pSortableColumn="patientName">بیمار
            <p-sortIcon field="patientName"></p-sortIcon>
          </th>
          <th pSortableColumn="sumPrice">مبلغ کل
            <p-sortIcon field="sumPrice"></p-sortIcon>
          </th>
          <th pSortableColumn="createdOn">تاریخ
            <p-sortIcon field="createdOn"></p-sortIcon>
          </th>
          <th>عملیات
          </th>
        </tr>
        <tr>
          <th></th>
          <th>
            <input type="text" (input)="dt.filter($event.target?.value, 'patientName', 'contains')"
              class="form-control">
          </th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-receipt let-rowIndex="rowIndex">
        <tr>
          <td>{{receipt.id}}</td>
          <td>{{receipt.patientName}}</td>
          <td>
            {{receipt.sumPrice | NumberSplitPrice}} ریال
          </td>
          <td>
            {{receipt.createdOn | ShamsiFullDateInOneLineZone}}
          </td>
          <td>
            <button *ngIf="checkAccess(4)" class="btn main-outline-btn mx-1"
              (click)="openEditreceipt(receipt)">ویرایش</button>
            <button *ngIf="checkAccess(3)" class="btn btn-outline-danger"
              (click)="deleteReceipt(receipt.id)">حذف</button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
<p-dialog id="edit-receipt-modal" header="{{modalHeader}}" [(visible)]="showReceiptsModal" [closable]="true"
  [ngClass]="{'modalShadow' : showReceiptsModal}" class="p-2">
  <div class="col-12 d-flex flex-wrap edit-receipt-modal">
    <div class="col-md-6 col-12 mb-3 text-right">
      <label for="patienType" class="text-right">نوع مراجعه</label>
      <div id="patienType" class="d-flex mode-selector p-0 my-2">
        <div class="ml-1 p-2 pointer text-center" [ngClass]="{  'selected-mode' :!receiptType}"
          (click)="receiptType = false">
          سر پایی</div>
        <div class="mr-1 p-2 pointer text-center" [ngClass]="{  'selected-mode' :receiptType}"
          (click)="receiptType = true">
          بستری</div>
      </div>
    </div>
    <div class="col-md-6 col-12 d-flex flex-column justify-content-center my-3">
      <label for="patient" class="text-right">بیمار</label>
      <input class="form-control" [disabled]="true" type="text" id="supplier" [(ngModel)]="editReceiptsModel.name">
    </div>
    <div class="col-md-6 col-12 text-right my-3">
      <h5 class="mt-3">محل و میزان دریافت</h5>
    </div>
    <div class="col-md-6 col-12 d-flex flex-column justify-content-center my-3">
      <label for="name" class="text-right">نقد</label>
      <input (input)="sumNumber()" class="form-control" type="text" id="name" [(ngModel)]="editReceiptsModel.cash">
    </div>
    <div class="col-md-6 col-12 d-flex flex-column justify-content-center my-3">
      <label for="serialnumber" class="text-right">کارت بانکی</label>
      <input (input)="sumNumber()" class="form-control" OnlyNumber="true" type="text" id="serialnumber"
        [(ngModel)]="editReceiptsModel.eftPos">
    </div>
    <div class="col-md-6 col-12 d-flex flex-column justify-content-center my-3">
      <label for="supplier" class="text-right">جمع کل دریافتی</label>
      <input class="form-control" [disabled]="true" type="text" id="supplier" [(ngModel)]="editReceiptsModel.sum">
    </div>
    <div class="col-md-6 col-12 d-flex flex-column justify-content-center my-3">
      <label for="note" class="text-right">یادداشت</label>
      <textarea name="note" id="note" [(ngModel)]="editReceiptsModel.note"></textarea>
    </div>

    <div class="col-12 d-flex justify-content-center my-3">
      <button class="btn btn-outline-success mx-1" (click)="editreceipt()">ذخیره</button>
      <button class="btn btn-outline-secondary mx-1" (click)="closeeditReceiptsModel()">انصراف</button>
    </div>
  </div>
</p-dialog>